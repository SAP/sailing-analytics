<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<link href='../../../../fontface.css' media='screen' rel='stylesheet' title='Default stylesheet' type='text/css' />
	<link href='../../../main.css' media='screen' rel='stylesheet' title='Default stylesheet' type='text/css' />
	<link rel='icon' href='../../../../sap.ico' type='image/x-icon'>
	<title>SAP Sailing Analytics Webservices API Version 1.0</title>
</head>
<body>
<h1>SAP Sailing Analytics Webservices API Version 1.0</h1>
<h2>URL: /api/v1/leaderboards/{name}/device_mappings/start</h2>

<b>Description:</b>
<p>Tracking App Device Checkin on leaderboard</p>
<br/>
<table>
	<tr>
		<td>Webservice Type:</td>
		<td>REST</td>
	</tr>
	<tr>
		<td>Input format:</td>
		<td>JSON (application/json)</td>
	</tr>
	<tr>
		<td>Output format:</td>
		<td>HTTP 200</td>
	</tr>
	<tr>
		<td>Mandatory parameters:</td>
		<td>None</td>
	</tr>
	<tr>
		<td>Optional parameters:</td>
		<td>None</td>
	</tr>
	<tr>
		<td>Request method:</td>
		<td>POST</td>
	</tr>
    <tr>
        <td>Payload:</td>
        <td>
        <pre><code>
either of:
    *competitorId ID of the competitor to map the device to.
    *boatId ID of the boat to map the device to.
    *markId ID of the boat to map the device to.
deviceType: Either android or ios. Needed for selecting correct push notification service.
deviceUuid: UUID generated by the app on first run. Not an identifier that globally identifies the piece of hardware such UDID under iOS, IMEI, or other.
pushDeviceId: On Android the GCM regId, on iOS the APNS push token. This is needed for sending push notifications to the device.
fromMillis: Milliseconds timestamp from which to map the device to the competitor.
secret: The regatta registration link secret can be included as an alternative to a bearertoken,if it is correct, the caller will be permitted ignoring all normal permission checks
        </code></pre>
    </td>
    </tr>

	<tr>
		<td>Example competitor tracking via secret:</td>
		<td>POST <a href=http://sapsailing.com/api/v1/leaderboards/{name}/device_mappings/start>http://sapsailing.com/api/v1/leaderboards/{name}/device_mappings/start</a>
			<pre><code>
{
    "competitorId" : "af855a56-9726-4a9c-a77e-da955bd289bg",
    "deviceType" : "ios",
    "deviceUuid" : "af855a56-9726-4a9c-a77e-da955bd289bf",
    "pushDeviceId" : "0f744707bebcf74f9b7c25d48e3358945f6aa01da5ddb387462c7eaf61bbad78",
    "fromMillis" : 1415624564718,
    "secret": "myRegattaSecret"
}
        </code></pre>
        </td>
    <tr>
    <td>Example boat tracking (without secret, this means that a valid bearertoken is required with a user that has the correct permissions):</td>
        <td>POST <a href=http://sapsailing.com/api/v1/leaderboards/{name}/device_mappings/start>http://sapsailing.com/api/v1/leaderboards/{name}/device_mappings/start</a>
        <pre><code>
{
    "boatId" : "af855a56-9726-4a9c-a77e-da955bd289bg",
    "deviceType" : "ios",
    "deviceUuid" : "af855a56-9726-4a9c-a77e-da955bd289bf",
    "pushDeviceId" : "0f744707bebcf74f9b7c25d48e3358945f6aa01da5ddb387462c7eaf61bbad78",
    "fromMillis" : 1415624564718
}
            </code></pre>
        </td>
    </tr>
	</tr>
        <tr>
        <td>Example mark tracking (without a secret as well, see note above):</td>
        <td>POST <a href=http://sapsailing.com/api/v1/leaderboards/{name}/device_mappings/start>http://sapsailing.com/api/v1/leaderboards/{name}/device_mappings/start</a>
            <pre><code>
{
    "markId" : "af855a56-9726-4a9c-a77e-da955bd289bg",
    "deviceType" : "ios",
    "deviceUuid" : "af855a56-9726-4a9c-a77e-da955bd289bf",
    "pushDeviceId" : "0f744707bebcf74f9b7c25d48e3358945f6aa01da5ddb387462c7eaf61bbad78",
    "fromMillis" : 1415624564718
}
            </code></pre>
        </td>
    </tr>
</table>
<div style="height: 1em;"></div>
<a href="index.html">Back to Web Service Overview</a> 
</body>
</html>
