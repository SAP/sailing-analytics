package com.sap.sailing.gwt.ui.client.media;

import com.google.gwt.core.client.GWT;
import com.google.gwt.dom.client.DivElement;
import com.google.gwt.dom.client.Element;
import com.google.gwt.dom.client.ImageElement;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.event.dom.client.HasClickHandlers;
import com.google.gwt.event.shared.HandlerRegistration;
import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.uibinder.client.UiField;
import com.google.gwt.user.client.ui.Widget;
import com.sap.sailing.gwt.ui.shared.media.VideoMetadataDTO;

public class VideoThumbnail extends Widget implements HasClickHandlers {

    private static VideoThumbnailUiBinder uiBinder = GWT.create(VideoThumbnailUiBinder.class);

    interface VideoThumbnailUiBinder extends UiBinder<Element, VideoThumbnail> {
    }

    @UiField
    DivElement captionUi;

    @UiField
    ImageElement thumbnailUi;

    public VideoThumbnail(VideoMetadataDTO video) {
        setElement(uiBinder.createAndBindUi(this));
        getElement().addClassName("videoThumbnail");
        captionUi.setInnerText(video.getTitle());
        if (video.getThumbnailRef() == null) {
            thumbnailUi
                    .setSrc("data:image/png;base64,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");
        } else {

            thumbnailUi.setSrc(video.getThumbnailRef());
        }
    }

    @Override
    public HandlerRegistration addClickHandler(ClickHandler handler) {
        return addDomHandler(handler, ClickEvent.getType());
    }

}
