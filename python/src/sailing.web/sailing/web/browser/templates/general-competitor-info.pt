
<div class="help">
    This screen display all information currently available to this system about competitors. Relies on live data.
</div>

<tal:if condition="view.listenerStarted()">
    <div tal:repeat="event view.allEvents()">
    <table width="100%">
        <tr>
            <td colspan="2">
                Event: <b>${event.name}</b>&nbsp;BoatClass: ${event.boatclass}<br/>
            </td>
        </tr>
        <tr>
            <td valign="top" colspan="2">
                <table width="100%">
                    <tr>
                        <td><b>T</b></td>
                        <td><b>Name</b></td>
                        <td><b>Nat</b></td>
                        <td><b>Races</b></td>
                    </tr>
                    <tal:for repeat="cp view.allCompetitorsFor(event.name)">
                    <tr>
                        <td valign="top">${cp.total or 0}</td>
                        <td valign="top">${cp.name}</td>
                        <td valign="top">${cp.nationality}</td>
                        <td valign="top">
                            <tal:for repeat="race cp.races">
                            ${event.races[repeat['race'].index]}<br/><b style="color: red;">${race}</b>&nbsp;&raquo;&nbsp;
                                <tal:for repeat="mark cp.marks[repeat['race'].index]">
                                &nbsp;&nbsp;&nbsp;<b>${mark}</b>&nbsp;&raquo;&nbsp;
                                    <tal:for repeat="value cp.values[repeat['race'].index][repeat['mark'].index].items()">
                                    <b style="color: green">${value[0]}:${value[1]}</b>|
                                    </tal:for>
                                </tal:for>
                                <br/>
                            </tal:for>
                        </td>
                    </tr>
                    </tal:for>
                </table>
            </td>
        </tr>
    </table>
    </div>
</tal:if>

<tal:else condition="not view.listenerStarted()">
    <b>It seems that you did not start the listener. Please do so before trying to display competitor information.</b>
</tal:else>
