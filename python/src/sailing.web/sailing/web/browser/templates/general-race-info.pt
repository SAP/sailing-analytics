
<div class="help">
    This screen display all information currently available to this system. If you think that there are information missing go to the
    "Java Connector" tab and hit the button "Refresh event data" and then "Reload live data" and the come back. This view is a combination
    of event configuration data and live data.
</div>

<tal:if condition="view.listenerStarted()">
    <div tal:repeat="event view.allEvents()">
    <table width="100%">
        <tr>
            <td colspan="2">
                Event: <b>${event.name}</b>&nbsp;BoatClass: ${event.boatclass}<br/>
            </td>
        </tr>
        <tr>
            <td valign="top">
                <table width="100%">
                    <tr>
                        <td valign="top"><b>Race</b></td>
                        <td valign="top"><b>Start Track</b></td>
                        <td valign="top"><b>Start</b></td>
                        <td valign="top"><b>Finish</b></td>
                        <td valign="top"><b>Last Event</b></td>
                        <td valign="top"><b>Wind</b></td>
                        <td valign="top"><b>Bearing</b></td>
                        <td valign="top"><b>Marks</b></td>
                    </tr>
                    <tal:for repeat="racepos range(len(event.races))">
                    <tr tal:define="cr view.raceBy(event.name, event.races[racepos])">
                        <td valign="top">${cr.name}</td>
                        <td valign="top">${view.millisToDatetime(cr.startoftracking, short=True)}</td>
                        <td valign="top">${view.millisToDatetime(cr.start, short=True)}</td>
                        <td valign="top">${view.millisToDatetime(cr.finish, short=True)}</td>
                        <td valign="top">${view.millisToDatetime(cr.timeofnewestevent, short=True)}</td>
                        <td valign="top">${cr.wind_source and cr.wind_source[:3] or 'EXP'}</td>
                        <td valign="top">${cr.wind_bearing or ''}</td>
                        <td valign="top">
                            Current Leg(s): ${cr.current_legs}<br/><br/>
                            <tal:for repeat="markname event.marks[racepos]">
                            ${markname}<br/>
                            </tal:for>
                        </td>
                    </tr>
                    </tal:for>
                </table>
            </td>
        </tr>
    </table>
    </div>
</tal:if>

<tal:else condition="not view.listenerStarted()">
    <b>It seems that you did not start the listener. Please do so before trying to display race information.</b>
</tal:else>
