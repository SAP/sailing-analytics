
<div class="help">Live Information</div>

<tal:if condition="view.listenerStarted()">
<form>
    <br/>
    Event: 
    <select name="event">
        <tal:for repeat="event view.allEvents()">
        <option value="${event.name}">${event.name}</option>
        </tal:for>
    </select>
    &nbsp;
    Race: 
    <select name="racename">
        <tal:for repeat="racename view.allRacesFor()">
        <option value="${racename}">${racename}</option>
        </tal:for>
    </select>

    <input id="live-loader" type="button" onclick="loadLive()" value="Load Live Information"/>

    <div id="live-data-view">
        &nbsp;
    </div>

    <script>
        function loadLive() {
            displayLoader('#live-data-view');
            GET('saveEventRace', {template: 'live-info-view', 
                eventname: $('select[name=event] option:selected').val(), 
                racename: $('select[name=racename] option:selected').val(),
                ignore_exceptions: '1'}, 
            function(data) {
                $('#live-data-view').html(data)
            });
        }
    </script>
</form>
</tal:if>

<tal:if condition="not view.listenerStarted()">
    <b>Please start listener before displaying live data!</b>
</tal:if>

