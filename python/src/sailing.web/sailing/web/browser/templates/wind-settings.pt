
<tal:if condition="view.listenerStarted()">
<div class="help">Here you can either select a wind source provider or set wind.</div>

<form>
    <br/>
    Event: 
    <select name="windevent">
        <tal:for repeat="event view.allEvents()">
        <option value="${event.name}">${event.name}</option>
        </tal:for>
    </select>
    &nbsp;
    Race: 
    <select name="windracename">
        <tal:for repeat="racename view.allRacesFor()">
        <option value="${racename}">${racename}</option>
        </tal:for>
    </select>

    <input id="wind-loader" type="button" onclick="loadWind()" value="Load Wind Information"/>

    <div id="wind-data">
        &nbsp;
    </div>

    <script>
        function loadWind() {
            displayLoader('#wind-data');
            GET('saveEventRace', {template: 'wind-settings-info', 
                eventname: $('select[name=windevent] option:selected').val(), 
                racename: $('select[name=windracename] option:selected').val(),
                ignore_exceptions: '1'}, 
            function(data) {
                $('#wind-data').html(data)
            });
        }
    </script>
</form>
</tal:if>

<tal:if condition="not view.listenerStarted()">
    <b>Please start listener before trying to read or set wind!</b>
</tal:if>

