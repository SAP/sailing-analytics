#!/bin/bash
PREFIX=$1
shift
for i in $*; do
  if [ ${i: -3} == ".gz" ]; then
   gzip -cd $i
  else
    cat $i
  fi | sed -e 's/^\([^T]*\)T\([^.]*\)[^ ]* [^ ]* \([^:]*\):[^ ]* [^ ]* [^ ]* [^ ]* [^ ]* [^ ]* \([^ ]*\) \([^ ]*\) [^ ]* \(\"[^"]*\"\) \(\"[^"]*\"\).*$/'$PREFIX' \3 - - [\1:\2 +0000] \6 \4 \5 "-" \7/'
done
