#!/bin/bash
RELATIVE_SERVER_DIR=$1
MAIL_PROPERTIES=mail.properties
ROOT_MAIL_PROPERTIES=/root/${MAIL_PROPERTIES}
SAILING_USER=sailing
SERVER_DIR=/home/${SAILING_USER}/servers/${RELATIVE_SERVER_DIR}
CONFIGURATION_DIR=${SERVER_DIR}/configuration
SAILING_MAIL_PROPERTIES=${CONFIGURATION_DIR}/${MAIL_PROPERTIES}
if [ -f "${ROOT_MAIL_PROPERTIES}" ]; then
  echo "Found ${ROOT_MAIL_PROPERTIES}. Starting to copy to ${SAILING_MAIL_PROPERTIES}"
  mkdir -p "${SERVER_DIR}"
  chown ${SAILING_USER} ${SERVER_DIR}
  chgrp ${SAILING_USER} ${SERVER_DIR}
  mkdir -p "${CONFIGURATION_DIR}"
  chown ${SAILING_USER} ${CONFIGURATION_DIR}
  chgrp ${SAILING_USER} ${CONFIGURATION_DIR}
  cp ${ROOT_MAIL_PROPERTIES} ${SAILING_MAIL_PROPERTIES}
  chown ${SAILING_USER} ${SAILING_MAIL_PROPERTIES}
  chgrp ${SAILING_USER} ${SAILING_MAIL_PROPERTIES}
else
  echo "Did not find ${ROOT_MAIL_PROPERTIES}. Cannot copy."
fi
